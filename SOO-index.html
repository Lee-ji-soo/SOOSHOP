<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

  <link href="main.css" rel="stylesheet">

  <title>SOOSHOP</title>
</head>

<body>

  <!--모달창 HTMl-->
  <div class="modalBox">
    <div class="black-bg" id="모달창">
      <div class="white-bg hidden">
        <h4 id="제목">로그인하세요</h4>
        <form id="form" action="login.php" onsubmit="return startLogin()">
          <div class="form-group">
            <input type="email" id="이메일" class="form-control" placeholder="이메일을 입력하세요">
          </div>
          <div class="form-group">
            <input type="password" id="비번" placeholder="비밀번호를 입력하세요" class="form-control">
          </div>
          <button type="submit" id='제출' class="btn btn-primary">Submit</button>
          <div onclick="modal닫기()" id="close" class="btn btn-primary">닫기</div>
        </form>
      </div>
    </div>
  </div>

  <!--모달창 open js-->
  <script>
    const blackBg = document.getElementById('모달창');

    function modal열기(구멍) {
      blackBg.style.display = 'block';
      document.getElementById('제목').innerHTML = 구멍;
      return 1000
    }
    function 모달창열기() {
      document.getElementById('모달창').style.display = 'block';
    }
    function modal닫기() {
      document.getElementById('모달창').style.display = 'none';
    }
  </script>

  <!--모달창 close js-->
  <script>
    const modalBox = document.querySelector('.modalBox');
    const closeBtn = document.getElementById('close');
    function closeModal1(e) {
      if (e.target == blackBg) {
        blackBg.display = 'none';
      }
    }
    modalBox.addEventListener('click', closeModal1);


  </script>

  <!--모달창 email-check js-->
  <script>
    const 이메일 = document.getElementById('이메일');
    const 비번 = document.getElementById('비번');
    const form = document.getElementById('form');
    var emailRule = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;

    // var 이메일확인 = 이메일.value;
    // console.log(emailRule.test(이메일확인));

    function startLogin(e) {
      var 이메일확인 = 이메일.value;
      console.log(이메일확인.match(emailRule));

      var 비번확인 = 비번.value
      if (이메일확인 == '') {
        alert('여기 ! 이메일을 입력하라')
        return false

      } else if (이메일확인.match(emailRule) === false) {
        console.log(이메일확인.match)
        alert('여기 ! 이메일을 제대로 입력하라')
        return false;
      }
      else if (비번확인 == '') {
        alert('여기 ! 비번을 입력하라')
        return false
      }
      else {
        return true;
      }
    }
    form.addEventListener('submit', startLogin)
  </script>

  <!--navibar HTML-->
  <nav class="navbar navbar-expand-lg" style="position:fixed; width:100%; z-index:3; opacity:0.8">
    <a class="navbar-brand" href="#">SOOSHOP</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="./SOO-index.html">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./SOO-cart.html">Cart</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./SOO-about.html">About</a>
        </li>
        <li>
          <a onclick="modal열기('로그인하세요')" class="nav-link" href="#" role="button">Log in</a>
        </li>
        <li>
          <a onclick="modal열기('가입하세요')" class="nav-link" href="#" role='button'>가입하기</a>
        </li>
      </ul>
    </div>
  </nav>

  <!--scrollEvent-->
  <script>
    $(window).on('scroll', function () {
      var scrollTop = $(window).scrollTop();
      if (scrollTop > 10) {
        $('.navbar-brand').addClass('smallFt');
        $('.navbar').addClass('nav-link-blk');
        $('.navbar').addClass('bg-light');
        $('.navbar').addClass('navbar-light');
      }
      else if (scrollTop < 10) {
        $('.navbar-brand').removeClass('smallFt')
        $('.navbar').removeClass('bg-light');
        $('.navbar').removeClass('navbar-light');
      }
    })
  </script>

  <!--메인 HTML-->
  <div class="jumbotron" style="background-color:#111;border-radius:0; padding-top:140px;">
    <h1 class="display-4 text-light">Enjoy Your Shop! Now 60%OFF</h1>
    <p class="lead text-white-50">This is a simple hero unit, a simple jumbotron-style component for calling extra
      attention to
      featured content or information.</p>
    <hr class="my-4 " style="border:0.5px solid #333; width:100%;">
    <p class="text-white-50">It uses utility classes for typography and spacing to space content out within the larger
      container.</p>
  </div>

  <!--상품진열 HTML-->
  <div class="container">
    <div style="margin-bottom:30px;">
      <button id="sort-btn__low" class="btn btn-dark">낮은 가격순으로 정렬</button>
      <button id="sort-btn__high" class="btn btn-dark">높은 가격순으로 정렬</button>
    </div>
    <div class="row">
      <!-- <div class="col-sm-4">
        <img class="img" src="pic2.jpg" width="100%">
        <h4 class="mt-4 name">상품명</h4>
        <p class='info'>상품설명</p>
      </div> -->
    </div>
  </div>

  <!--상품진열 js-->
  <script src="products.js"></script>
  <script>
    const productBoxRow = document.querySelector('.row');

    for (i = 0; i < products.length; i++) {
      var box = document.createElement('div');
      var a = document.createElement('a');
      var img = document.createElement('img');
      var h4 = document.createElement('h4');
      var p = document.createElement('p');

      box.setAttribute('class', 'productBox col-sm-4');
      box.setAttribute('id', products[i].id);
      console.log(box.id)
      a.setAttribute('href', `./SOO-detail-1.html`);
      img.setAttribute('width', '100%');
      img.setAttribute('style', 'cursor:pointer;');
      h4.setAttribute('class', 'mt-4 name');
      p.setAttribute('class', 'price');

      productBoxRow.appendChild(box);
      box.appendChild(a);
      a.appendChild(img);
      box.appendChild(h4);
      box.appendChild(p);

      img.setAttribute('src', products[i].img);
      h4.innerHTML = products[i].title;
      p.innerHTML = products[i].price;
    }


  </script>

  <!--낮은 가격순정렬-->
  <script>
    var sortBtnLow = document.getElementById('sort-btn__low');
    var sortBtnHigh = document.getElementById('sort-btn__high');
    var boxAll = document.querySelectorAll('.productBox');
    var imgAll = document.querySelectorAll('.productBox img');
    var h4All = document.querySelectorAll('.productBox h4');
    var pAll = document.querySelectorAll('.productBox p');


    function sorting() {
      for (i = 0; i < products.length; i++) {
        imgAll[i].src = products[i].img;
        h4All[i].innerHTML = products[i].title;
        pAll[i].innerHTML = products[i].price;
        boxAll[i].setAttribute('id', products[i].id);
        console.log(boxAll[i].id)
      }
    }

    function sortPriceLow() {
      products.sort(function (a, b) {
        return a.priceset - b.priceset
      })
      sorting();
      link();
    }

    function sortPriceHigh(e) {
      products.sort(function (a, b) {
        return b.priceset - a.priceset
      })
      sorting();
      link();

    }

    sortBtnLow.addEventListener('click', sortPriceLow)
    sortBtnHigh.addEventListener('click', sortPriceHigh)
  </script>

  <!--링크 연결하기-->
  <script>
    var a = document.querySelectorAll('.productBox a');

    function link() {
      for (i = 0; i < products.length; i++) {
        // console.log('boxAll', boxAll[i].id)
        a[i].href = `./SOO-detail-${boxAll[i].id}.html`;
      }
    }
    link();

  </script>

  <!--상품더보기 AJAX-->
  <div class="container my-5 text-center">
    <button id="more-btn" class="btn btn-dark">상품 더보기</button>
  </div>
  <script>
    // $.get('http://127.0.0.1:8000/more.json')
    //   .done(function (데이터) {
    //     console.log(데이터)
    //   })

    $('#more-btn').on('click', function () {
      $.get('http://127.0.0.1:8000/more.json')
        .done(function (pd) {
          console.log(pd[0].img)
          for (i = 0; i < pd.length; i++) {
            var addPd = `<div class="productBox col-sm-4">
            <img style="width:100%; cursor:pointer;" src=${pd[i].img}>
            <h4 class="mt-4 name">${pd[i].name}</h4>
            <p class="price">$${pd[i].price}</p>
            </div>`
            $('.row').append(addPd)
          }
        })
    })

    //1.더보기버튼누르면
    //2.more.json경로로 get 요청으ㄹ해서      데이터가져옴
    //3.가져온데이터를 바탕으로 상품레이아웃 HTML 예쁘게 만듬
    //4. 원히는 곳에 꽂아놈
  </script>


  <!--footer-->
  <div class="jumbotron" style="background-color:#111;border-radius:0; margin-bottom:0">
    <p class="lead text-white">This is a simple hero unit, a simple jumbotron-style component for calling extra
      attention to
      featured content or information.</p>
    <hr class="my-4 ">
    <p class="text-white-50">It uses utility classes for typography and spacing to space content out within the larger
      container.</p>
  </div>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->

  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
    crossorigin="anonymous"></script>
</body>

</html>